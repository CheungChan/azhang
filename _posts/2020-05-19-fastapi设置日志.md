---
title: fastapi设置日志
key: fastapi_logger
layout: article
date: '2020-05-19 17:00:00'
tags: 技术 python
typora-root-url: ../../iblog
---

#### 问题

为fastapi设置日志, 设置日志格式, 并打印到文件中

#### 解答

```python
import logging
from logging.handlers import RotatingFileHandler

from fastapi.logger import logger

app = FastAPI()
formatter = logging.Formatter(
    "[%(asctime)s][%(levelname)s] %(pathname)s %(lineno)d : %(message)s"
)
handler = RotatingFileHandler("logs/web.log", backupCount=5, maxBytes=1024 * 1024 * 10)
logging.getLogger().setLevel(logging.NOTSET)
logger.addHandler(handler)
handler.setFormatter(formatter)

@app.get("/")
def index():
    logger.debug("index test")
    return {"status": 0, "data": []}
```

